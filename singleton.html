<!doctype html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>싱글톤 패턴 구현</title>
</head>
<body>
<div id="middle">
    <h1 class="hidden">포트 폴리오</h1>
</div>

<div class="item_thumb">
    <a href="#none" class="link_thumb"><img src="i2.media.daumcdn.jpg" alt="" class="thumb_g"/></a>
</div>


<script>

    var Singleton = (function () {

        /**
         * --------------------------------
         * 싱글톤 패턴 구현 코드
         * --------------------------------
         */

        // 비공개 변수, 메서드 정의
        var instantiaed;

        function init() {

            // 싱글톤 객체 정의
            return {
                // 공개 메서드 정의
                publicMethod : function () {
                    return 'hello Singleton Pattern!!!';
                },
                // 공개 프로퍼티 정의
                publicProp : 'single value'
            }

        }
        
        // 공개 메서드인 getInstance() 를 정의한 객체.
        // 렉시컬 특성으로 인해 비공개 변수, 메서드에 접근 가능(클로저)
        return {
            getInstance : function () {
                if (!instantiaed) {
                    instantiaed = init();
                }
                return instantiaed;
            }
        }

    })();

    // 싱글톤 객체 생성하여 publicMethod 호출 가능해짐
    var first = Singleton.getInstance();
    first.publicMethod();
    console.log(first.publicMethod()); // hello Singleton Pattern!!!

    var second = Singleton.getInstance();
    second.publicMethod();
    console.log(second.publicMethod()); // hello Singleton Pattern!!!

    console.log(first === second); // true

    console.log(second.publicProp);


</script>

</body>
</html>